<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ù„ÙƒÙŠØ© | ÙƒØ±ÙˆØ¨ Ø§Ù„Ø­Ù„ÙˆÙŠÙ†</title>
    <style>
        /* --- Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª ÙˆØ§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¹Ø§Ù… --- */
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #000; color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
        }

        /* Ø®Ù„ÙÙŠØ© Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³ Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© (Ø¬Ø²ÙŠØ¦Ø§Øª Ù†Ø§Ø±ÙŠØ©) */
        canvas { 
            position: fixed; top: 0; left: 0; z-index: 1; 
            pointer-events: none; opacity: 0.6;
        }

        .container {
            position: relative; z-index: 10;
            max-width: 1200px; margin: 0 auto; padding: 40px 20px;
            text-align: center;
        }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„ØªØ±Ø­ÙŠØ¨ --- */
        header { margin-bottom: 60px; animation: slideDown 0.8s ease-out; }
        h1 { 
            font-size: 3.5rem; color: #ff4500; 
            text-shadow: 0 0 20px rgba(255, 69, 0, 0.7); 
            margin-bottom: 15px; letter-spacing: 2px;
        }
        .welcome-msg { 
            color: #ffcc00; font-size: 1.5rem; font-weight: bold; 
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.4); 
        }

        /* --- Ø´Ø¨ÙƒØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ --- */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px; margin-top: 40px;
        }

        .game-card {
            background: linear-gradient(145deg, rgba(30, 30, 30, 0.9), rgba(15, 15, 15, 0.95));
            border: 2px solid #333; border-radius: 25px;
            padding: 40px; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer; backdrop-filter: blur(15px);
            position: relative; overflow: hidden;
            display: flex; flex-direction: column; align-items: center;
        }

        .game-card::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255, 69, 0, 0.1) 0%, transparent 70%);
            transition: 0.5s;
        }

        .game-card:hover {
            border-color: #ff4500; transform: translateY(-15px) scale(1.02);
            box-shadow: 0 20px 50px rgba(255, 69, 0, 0.4);
        }

        .game-icon { font-size: 6rem; margin-bottom: 20px; display: block; filter: drop-shadow(0 0 10px rgba(255,255,255,0.2)); transition: 0.3s; }
        .game-card:hover .game-icon { transform: scale(1.1) rotate(5deg); }
        
        .game-title { font-size: 2rem; font-weight: 900; color: #fff; margin-bottom: 15px; }
        .game-desc { color: #aaa; line-height: 1.6; font-size: 1.1rem; margin-bottom: 20px; }

        /* --- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±ÙˆÙ…Ø§Øª --- */
        #lobby-section { display: none; animation: fadeIn 0.6s ease; }
        .lobby-wrapper {
            background: rgba(20, 20, 20, 0.8); border: 1px solid #ff4500;
            border-radius: 20px; padding: 30px; margin-top: 20px;
        }
        .lobby-header {
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #333; padding-bottom: 20px; margin-bottom: 25px;
        }

        /* --- Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© --- */
        .btn {
            padding: 15px 35px; border-radius: 12px; border: none; 
            font-weight: bold; cursor: pointer; transition: 0.3s; 
            font-size: 1.1rem; text-transform: uppercase;
            text-decoration: none; display: inline-block;
        }
        .btn-create { background: linear-gradient(45deg, #2ed573, #7bed9f); color: white; box-shadow: 0 5px 15px rgba(46, 213, 115, 0.3); }
        .btn-join { background: linear-gradient(45deg, #ff4500, #ff6b6b); color: white; box-shadow: 0 5px 15px rgba(255, 69, 0, 0.3); width: 100%; }
        .btn-snake { background: linear-gradient(45deg, #00ff41, #008f11); color: black; box-shadow: 0 5px 15px rgba(0, 255, 65, 0.3); width: 100%; }
        .btn-back { background: #444; color: white; margin-top: 40px; }

        /* --- Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© --- */
        .modal {
            display: none; position: fixed; z-index: 1000; top: 0; left: 0; 
            width: 100%; height: 100%; background: rgba(0,0,0,0.95);
            align-items: center; justify-content: center;
        }
        .modal-content {
            background: #111; padding: 50px; border-radius: 30px; 
            border: 2px solid #ff4500; width: 450px; text-align: right;
            box-shadow: 0 0 100px rgba(255, 69, 0, 0.2);
        }

        .instagram-tag { position: fixed; top: 30px; right: 30px; color: #ffcc00; font-weight: bold; z-index: 100; font-size: 1.3rem; text-shadow: 0 0 10px #ffcc00; }
        @keyframes slideDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="instagram-tag">IG:pd_ww</div>
    <canvas id="canvas"></canvas>

    <div class="container">
        <header>
            <h1 id="mainTitle">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h1>
            <p class="welcome-msg" id="welcomeText">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø³Ø§Ø­Ø©</p>
        </header>

        <div id="games-section" class="games-grid">
            
            <div class="game-card" onclick="openLobby('X-O')">
                <span class="game-icon">âš”ï¸</span>
                <div class="game-title">ØªØ­Ø¯ÙŠ X-O</div>
                <p class="game-desc">ÙˆØ§Ø¬Ù‡ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ ÙÙŠ ØºØ±Ù Ø®Ø§ØµØ© Ø£Ùˆ Ø§Ø®ØªØ¨Ø± Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø¶Ø¯ Ø£Ø°ÙƒÙ‰ ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙÙŠ Ù†Ù…Ø· Ø§Ù„Ù€ AI.</p>
                <button class="btn btn-join">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø±Ø¯Ù‡Ø©</button>
            </div>

            <div class="game-card" onclick="window.location.href='snake.html'">
                <span class="game-icon">ğŸ</span>
                <div class="game-title">Ø³Ø§Ø­Ø© Ø§Ù„Ø«Ø¹Ø§Ø¨ÙŠÙ†</div>
                <p class="game-desc">Ù…Ø¹Ø±ÙƒØ© Ø¬Ù…Ø§Ø¹ÙŠØ© Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ù…Ø¨Ø§Ø´Ø±Ø©! Ø§Ù„ØªÙ‡Ù… Ø§Ù„Ù†Ù‚Ø§Ø·ØŒ ÙƒÙ† Ø§Ù„Ø£ÙƒØ¨Ø±ØŒ ÙˆØ§Ø³Ø­Ù‚ Ø«Ø¹Ø§Ø¨ÙŠÙ† Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†.</p>
                <button class="btn btn-snake">Ø§Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù† Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</button>
            </div>

        </div>

        <div id="lobby-section">
            <div class="lobby-wrapper">
                <div class="lobby-header">
                    <h2 style="margin:0; color:#ff4500;">ØªØ­Ø¯ÙŠØ§Øª X-O Ø§Ù„Ù†Ø´Ø·Ø©</h2>
                    <button class="btn btn-create" onclick="openCreateModal()">â• Ø¥Ù†Ø´Ø§Ø¡ ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯</button>
                </div>
                
                <div id="roomsContainer">
                    <div class="room-item">
                        <div style="text-align: right;">
                            <b style="font-size: 1.3rem;">Ø±ÙˆÙ… ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ±</b>
                            <p style="margin: 5px 0 0; color: #777;">Ø§Ù„Ù…Ù†Ø´Ø¦: Ø§Ù„Ù…Ø§ÙŠØ³ØªØ±Ùˆ | Ø§Ù„Ø­Ø§Ù„Ø©: Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø®ØµÙ…</p>
                        </div>
                        <button class="btn btn-join" style="width: auto;" onclick="quickJoin()">Ø§Ù†Ø¶Ù…Ø§Ù…</button>
                    </div>
                </div>
            </div>
            <button class="btn btn-back" onclick="closeLobby()">â¬… Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </div>
    </div>

    <div id="createModal" class="modal">
        <div class="modal-content">
            <h3>ØªØ®ØµÙŠØµ Ø§Ù„Ù…ÙˆØ§Ø¬Ù‡Ø©</h3>
            <label style="display:block; margin-top:20px; color:#ffcc00;">1. Ù†Ù…Ø· Ø§Ù„Ù„Ø¹Ø¨:</label>
            <select id="playMode" style="width:100%; padding:15px; margin-top:10px; background:#000; border:1px solid #444; color:white; border-radius:10px;">
                <option value="AI">Ø¶Ø¯ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ğŸ¤–)</option>
                <option value="PVP">Ø¶Ø¯ ØµØ¯ÙŠÙ‚ (Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† ğŸ‘¥)</option>
            </select>

            <label style="display:block; margin-top:20px; color:#ffcc00;">2. Ø§Ø®ØªØ± Ø±Ù…Ø²Ùƒ:</label>
            <select id="hostChoice" style="width:100%; padding:15px; margin-top:10px; background:#000; border:1px solid #444; color:white; border-radius:10px;">
                <option value="X">Ø³Ø£Ù„Ø¹Ø¨ Ø¨Ù€ ( X )</option>
                <option value="O">Ø³Ø£Ù„Ø¹Ø¨ Ø¨Ù€ ( O )</option>
            </select>
            
            <button class="btn btn-create" style="width:100%; margin-top:30px; padding: 20px;" onclick="launchGame()">Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø±ÙƒØ© Ø§Ù„Ø¢Ù†</button>
            <p onclick="closeCreateModal()" style="cursor:pointer; text-align:center; color:gray; margin-top:20px;">Ø¥Ù„ØºØ§Ø¡</p>
        </div>
    </div>

    <script>
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const userName = sessionStorage.getItem('userName') || "ÙŠØ§ Ø¨Ø·Ù„";
        document.getElementById('welcomeText').innerText = `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ${userName} ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„ØªØ­Ø¯ÙŠ`;

        function openLobby(game) {
            document.getElementById('games-section').style.display = 'none';
            document.getElementById('lobby-section').style.display = 'block';
            document.getElementById('mainTitle').innerText = "Ø±Ø¯Ù‡Ø© " + game;
        }

        function closeLobby() {
            document.getElementById('games-section').style.display = 'grid';
            document.getElementById('lobby-section').style.display = 'none';
            document.getElementById('mainTitle').innerText = "Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ù„ÙƒÙŠØ©";
        }

        function openCreateModal() { document.getElementById('createModal').style.display = 'flex'; }
        function closeCreateModal() { document.getElementById('createModal').style.display = 'none'; }

        function launchGame() {
            const mode = document.getElementById('playMode').value;
            const symbol = document.getElementById('hostChoice').value;
            sessionStorage.setItem('playMode', mode);
            sessionStorage.setItem('playerSymbol', symbol);
            document.body.style.opacity = '0';
            document.body.style.transition = '0.5s';
            setTimeout(() => { window.location.href = 'tictactoe.html'; }, 500);
        }

        function quickJoin() {
            sessionStorage.setItem('playMode', 'PVP');
            sessionStorage.setItem('playerSymbol', 'X');
            window.location.href = 'tictactoe.html';
        }

        // --- Ù†Ø¸Ø§Ù… Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª Ø§Ù„Ù†Ø§Ø±ÙŠØ© ---
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        class Particle {
            constructor() { this.reset(); }
            reset() {
                this.x = Math.random() * canvas.width;
                this.y = canvas.height + Math.random() * 100;
                this.size = Math.random() * 3 + 1;
                this.speedY = Math.random() * -3 - 1;
                this.speedX = Math.random() * 2 - 1;
                this.opacity = Math.random() * 0.5 + 0.3;
            }
            update() {
                this.y += this.speedY;
                this.x += this.speedX;
                if (this.y < -10) this.reset();
            }
            draw() {
                ctx.fillStyle = `rgba(255, 69, 0, ${this.opacity})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        for (let i = 0; i < 100; i++) { particles.push(new Particle()); }
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>